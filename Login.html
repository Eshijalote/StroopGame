<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <script src="https://cdn.auth0.com/js/lock/11.5.2/lock.min.js"></script>
    <script>
        var clientId = "EKGzr6M1Daib8ws5KXovxwMVxIjf7acs";
        var domain = "gamelogin.auth0.com";
  //      var lock = new Auth0Lock(clientId, domain);
        var lock = new Auth0Lock(clientId, domain, {
            auth: {
                redirectUrl: 'http://localhost:63342/Stroop/StroopTest.html',
                responseType: 'token id_token',
                params: {
                    scope: 'openid profile email' // Learn about scopes: https://auth0.com/docs/scopes
                }


            }

        });
        lock.show();

        lock.on("authenticated", function(authResult) {
            lock.getUserInfo(authResult.accessToken, function(error, profile) {
                if (error) {
                    // Handle error
                    return;
                }

                localStorage.setItem("accessToken", authResult.accessToken);
                localStorage.setItem("profile", JSON.stringify(profile));

                // Update DOM
            });

        });

        lock.getUserInfo(accessToken, function(error, profile) {
            if (!error) {
                alert("hello " + profile.name);
            }
        });
        /*lock.on("authenticated", function(authResult) {
            // Use the token in authResult to getUserInfo() and save it to localStorage
            lock.getUserInfo(authResult.accessToken, function(error, profile) {
                if (error) {
                    // Handle error
                    return;
                }

                document.getElementById('nick').textContent = profile.nickname;

                localStorage.setItem('accessToken', authResult.accessToken);
                localStorage.setItem('profile', JSON.stringify(profile));
            });
        });*/
    </script>

    <meta name="viewport" content="width=device-width, initial-scale=1"/>
</head>
<body>
<h2>Welcome <span id="nick" class="nickname"></span></h2>
</body>
</html>